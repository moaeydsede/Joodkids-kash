<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#111827"/>
  <title>VIP Cashbook</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="mobile-web-app-capable" content="yes"/>
</head>
<body>
  <div class="bg"></div>

  <!-- LOGIN -->
  <main id="loginView" class="auth">
    <section class="auth-card">
      <div class="auth-brand">
        <div class="vip-badge">VIP</div>
        <div>
          <h1>Cashbook</h1>
          <p>ุฏูุชุฑ ููููุฉ ุงูุตูุฏูู ูุงููุญุงูุธ ูุงูุญุณุงุจุงุช</p>
        </div>
      </div>

      <form id="loginForm" class="auth-form" autocomplete="on">
        <label>
          <span>ุงุณู ุงููุณุชุฎุฏู</span>
          <input id="loginUsername" type="text" autocomplete="username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required />
        </label>
        <label>
          <span>ูููุฉ ุงููุฑูุฑ</span>
          <div class="pass-wrap">
            <input id="loginPassword" type="password" autocomplete="current-password" placeholder="โขโขโขโขโข" required />
            <button type="button" class="icon-btn" id="togglePass" title="ุฅุธูุงุฑ/ุฅุฎูุงุก">๐๏ธ</button>
          </div>
        </label>

        <button class="btn primary" type="submit">ุฏุฎูู</button>
      </form>
    </section>
  </main>

  <!-- APP -->
  <div id="appView" class="app hidden">
    <header class="topbar">
      <div class="brand">
        <div class="vip-badge small">VIP</div>
        <div class="brand-text">
          <div class="title">Cashbook</div>
          <div class="subtitle" id="subtitleLine">ุงูุฃุฑุตุฏุฉ</div>
        </div>
      </div>

      <div class="top-actions">
        <button class="chip" id="themeBtn" title="ุชุจุฏูู ุงููุถุน">๐</button>
        <button class="chip" id="viewModeBtn" title="ุชุจุฏูู ุนุฑุถ ุงูุนูููุงุช">๐ฑ ุนุฑุถ</button>
        <button class="chip" id="exportBtn" title="ุชุตุฏูุฑ CSV">โฌ๏ธ CSV</button>
        <button class="chip" id="printBtn" title="ุทุจุงุนุฉ">๐จ๏ธ</button>
        <button class="chip danger" id="logoutBtn" title="ุชุณุฌูู ุฎุฑูุฌ">ุฎุฑูุฌ</button>
      </div>
    </header>

    <aside class="sidebar">
      <nav class="nav">
        <button class="nav-item active" data-view="dashboard"><span class="nav-ico">๐</span><span>ุงูุฃุฑุตุฏุฉ</span></button>
        <button class="nav-item" data-view="transactions"><span class="nav-ico">๐งพ</span><span>ุงูุนูููุงุช</span></button>
        <button class="nav-item" data-view="accounts"><span class="nav-ico">๐ผ</span><span>ุงูุญุณุงุจุงุช</span></button>
        <button class="nav-item owner-only" data-view="users"><span class="nav-ico">๐ฅ</span><span>ุงููุณุชุฎุฏููู</span></button>

        <div class="nav-footer">
          <div class="pill">
            <div class="pill-title">ุงููุณุชุฎุฏู</div>
            <div class="pill-value" id="currentUserName">โ</div>
          </div>
          <div class="pill">
            <div class="pill-title">ุงูุฏูุฑ</div>
            <div class="pill-value" id="currentUserRole">โ</div>
          </div>
        </div>
      </nav>
    </aside>

    <main class="content">
      <!-- DASHBOARD (NO ADD/EDIT OPERATIONS HERE) -->
      <section id="view-dashboard" class="view">
        <div class="card">
          <div class="card-head">
            <h2>ุงูุฃุฑุตุฏุฉ ุญุณุจ ุงูุญุณุงุจ</h2>
            <div class="muted small" id="todayLabel">โ</div>
          </div>

          <div class="kpis">
            <div class="kpi">
              <div class="kpi-label">ุฅุฌูุงูู ุงูููุจูุถุงุช (ุงูููู)</div>
              <div class="kpi-value" id="kpiIn">โ</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">ุฅุฌูุงูู ุงููุฏููุนุงุช (ุงูููู)</div>
              <div class="kpi-value" id="kpiOut">โ</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">ุตุงูู ุงูุญุฑูุฉ (ุงูููู)</div>
              <div class="kpi-value" id="kpiNet">โ</div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="table-wrap">
            <table class="table" id="balancesTable">
              <thead>
                <tr>
                  <th>ุงูุญุณุงุจ</th>
                  <th>ุงูููุน</th>
                  <th>ููุจูุถุงุช</th>
                  <th>ูุฏููุนุงุช</th>
                  <th>ุงูุฑุตูุฏ</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- TRANSACTIONS -->
      <section id="view-transactions" class="view hidden">
        <div class="card">
          <div class="card-head">
            <h2>ุงูุนูููุงุช</h2>
            <div class="muted small">ููุชุฑุฉ ุญุณุจ ุงูุญุณุงุจ ูุงูุชุงุฑูุฎ</div>
          </div>

          <div class="filters">
            <label><span>ุงูุญุณุงุจ</span><select id="fAccount"></select></label>
            <label><span>ูู</span><input id="fFrom" type="date" /></label>
            <label><span>ุฅูู</span><input id="fTo" type="date" /></label>
            <label><span>ุจุญุซ</span><input id="fSearch" type="text" placeholder="ููุงุญุธุฉ" /></label>
            <button class="btn" id="clearFiltersBtn" type="button">ูุณุญ</button>
          </div>

          <div class="divider"></div>

          <form id="txForm" class="form">
            <div class="row">
              <label class="grow"><span>ุงูุญุณุงุจ</span><select id="tAccount" required></select></label>
              <label class="grow"><span>ุงูููุน</span>
                <select id="tType" required>
                  <option value="in">ูุจุถ</option>
                  <option value="out">ุฏูุน</option>
                </select>
              </label>
            </div>

            <div class="row">
              <label class="grow"><span>ุงููุจูุบ</span><input id="tAmount" type="number" min="0" step="0.01" placeholder="0" required /></label>
              <label class="grow"><span>ุงูุชุงุฑูุฎ</span><input id="tDate" type="date" required /></label>
            </div>

            <label><span>ููุงุญุธุฉ</span><input id="tNote" type="text" placeholder="ูุซุงู: ุฅูุฌุงุฑ / ูุจูุนุงุช / ุชุญููู" /></label>

            <button class="btn primary" type="submit">ุญูุธ ุงูุนูููุฉ</button>
            <input type="hidden" id="editId" value="" />
          </form>

          <div class="divider"></div>

          <label class="btn" style="margin-bottom:10px;display:inline-block;">
            ๐ฅ ุงุณุชูุฑุงุฏ ูู Excel
            <input type="file" id="importFile" accept=".xlsx,.csv" hidden>
          </label>

          <div class="table-wrap">
            <table class="table" id="txTable">
              <thead>
                <tr>
                  <th>ุงูุชุงุฑูุฎ</th>
                  <th>ุงูุญุณุงุจ</th>
                  <th>ุงูููุน</th>
                  <th>ุงููุจูุบ</th>
                  <th>ููุงุญุธุฉ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="muted small" id="txCount">โ</div>
        </div>
      </section>

      <!-- ACCOUNTS -->
      <section id="view-accounts" class="view hidden">
        <div class="card">
          <div class="card-head">
            <h2>ุงูุญุณุงุจุงุช</h2>
            <div class="muted small">ุฅุถุงูุฉ/ุชุนุฏูู ุญุณุงุจุงุช</div>
          </div>

          <form id="accForm" class="form">
            <div class="row">
              <label class="grow"><span>ุงุณู ุงูุญุณุงุจ</span><input id="aName" type="text" placeholder="ูุซุงู: ุตูุฏูู" required /></label>
              <label class="grow"><span>ุงูููุน</span>
                <select id="aType" required>
                  <option value="cash">ุตูุฏูู</option>
                  <option value="wallet">ูุญูุธุฉ ุฅููุชุฑูููุฉ</option>
                  <option value="insta">ุญุณุงุจ ุงูุณุชุง</option>
                  <option value="other">ุฃุฎุฑู</option>
                </select>
              </label>
            </div>

            <label><span>ููุงุญุธุฉ</span><input id="aNote" type="text" placeholder="ุงุฎุชูุงุฑู" /></label>

            <button class="btn primary" type="submit">ุญูุธ ุงูุญุณุงุจ</button>
            <input type="hidden" id="aEditId" value="" />
          </form>

          <div class="divider"></div>

          <div class="table-wrap">
            <table class="table" id="accTable">
              <thead>
                <tr>
                  <th>ุงุณู ุงูุญุณุงุจ</th>
                  <th>ุงูููุน</th>
                  <th>ููุงุญุธุฉ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- USERS (ADMIN ONLY) -->
      <section id="view-users" class="view hidden">
        <div class="card">
          <div class="card-head">
            <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
            <div class="muted small">ููุฃุฏูู ููุท</div>
          </div>

          <form id="userForm" class="form">
            <div class="row">
              <label class="grow"><span>ุงุณู ุงููุณุชุฎุฏู</span><input id="uUsername" type="text" placeholder="ูุซุงู: user1" required /></label>
              <label class="grow"><span>ูููุฉ ุงููุฑูุฑ</span><input id="uPassword" type="text" placeholder="ูุซุงู: 11111" required /></label>
            </div>
            <label><span>ุงูุงุณู (ุงุฎุชูุงุฑู)</span><input id="uName" type="text" placeholder="ูุซุงู: Ahmed" /></label>
            <button class="btn primary" type="submit">ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
          </form>

          <div class="divider"></div>

          <div class="table-wrap">
            <table class="table" id="usersTable">
              <thead>
                <tr>
                  <th>ุงุณู ุงููุณุชุฎุฏู</th>
                  <th>ุงูุงุณู</th>
                  <th>ุงูุฏูุฑ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="muted small">โ๏ธ ูุง ุชุณุชุฎุฏู ูููุงุช ูุฑูุฑ ุญุณุงุณุฉ (Static / ุจุฏูู ุณูุฑูุฑ).</div>
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
